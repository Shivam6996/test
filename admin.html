<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Roblox ID Shop</title>
<style>
body{font-family:Arial,sans-serif;background:#f5f6f6;margin:0;padding:0}
header{background:#febd69;padding:1rem;text-align:center;color:#111}
header a{margin-left:1rem;color:#111;text-decoration:none;font-weight:bold}
main{max-width:600px;margin:2rem auto;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.1)}
form input, form button{width:100%;padding:12px;margin-bottom:0.8rem;border-radius:6px;border:1px solid #ddd;font-size:0.95rem}
form input:focus{outline:none;border-color:#febd69;box-shadow:0 0 4px rgba(254,189,105,0.8)}
form button{background:#febd69;border:none;font-weight:bold;cursor:pointer;transition:0.3s}
form button:hover{background:#f3a847}
#admin-items-list{list-style:none;padding:0;margin-top:1rem}
#admin-items-list li{background:#fff;padding:10px;border-radius:6px;margin-bottom:8px;box-shadow:0 1px 4px rgba(0,0,0,0.1)}
#dashboard{display:none}
</style>
</head>
<body>
<header>
<h1>Admin Panel</h1>
<a href="index.html">Shop</a>
<a href="#" onclick="doLogout()">Logout</a>
</header>

<main>
<div id="dashboard">
<h2>Dashboard</h2>
<form id="add-item-form">
<input type="text" id="item-name" placeholder="Item Name" required>
<input type="text" id="item-id" placeholder="Roblox ID" required>
<input type="number" id="item-price" placeholder="Price" required>
<button type="submit">Add Item</button>
</form>

<h3>Current Items</h3>
<ul id="admin-items-list"></ul>
</div>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// 1. Replace with your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyC_KqYOD1QkQXiTpiRi7L3QsO-cwrsrUXA",
  authDomain: "roblox-shop-1878d.firebaseapp.com",
  projectId: "roblox-shop-1878d",
  appId: "1:675280968126:web:ccbfcb4f28fe69f74841ef"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// 2. Admin email list
const adminEmails = ["your.email@example.com"];

// 3. Protect admin dashboard
onAuthStateChanged(auth, user => {
  if(!user || !adminEmails.includes(user.email)){
    alert("You are not authorized. Redirecting to login.");
    signOut(auth).then(()=>window.location.href='login.html');
  } else {
    document.getElementById("dashboard").style.display = "block";
    loadAdminItems();
  }
});

// 4. Logout function
window.doLogout = () => signOut(auth).then(()=> window.location.href='index.html');

// 5. Item management
document.getElementById("add-item-form").addEventListener("submit", e => {
  e.preventDefault();
  const name = document.getElementById("item-name").value;
  const id = document.getElementById("item-id").value;
  const price = document.getElementById("item-price").value;

  let items = JSON.parse(localStorage.getItem("shopItems")) || [];
  items.push({ name, id, price });
  localStorage.setItem("shopItems", JSON.stringify(items));

  e.target.reset();
  loadAdminItems();
});

function loadAdminItems(){
  const list = document.getElementById("admin-items-list");
  const items = JSON.parse(localStorage.getItem("shopItems")) || [];
  list.innerHTML = "";
  items.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.name} - ${item.id} - $${item.price}`;
    list.appendChild(li);
  });
}
</script>
</body>
</html>
